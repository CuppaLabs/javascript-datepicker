!function(a){"use strict";function k(a){this.options||(this.options=h({},j,!0)),this.options=h(this.options,a,!0);var b=this.options;this.date=new Date(b.defaultDate),this.selectedDate=new Date(b.defaultDate),this.el=document.createElement("div"),this.init()}var b=["Su","Mo","Tu","We","Th","Fr","Sa"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],f=[31,28,31,30,31,30,31,31,30,31,30,31],g=function(a){return a instanceof Date&&!isNaN(a.valueOf())},h=function(a,b,c){var d,e;for(d in b)e=void 0!==a[d],e&&"object"==typeof b[d]&&null!==b[d]&&void 0===b[d].nodeName?g(b[d])?c&&(a[d]=new Date(b[d].getTime())):isArray(b[d])?c&&(a[d]=b[d].slice(0)):a[d]=h({},b[d],c):!c&&e||(a[d]=b[d]);return a},i=function(a){a.stopPropagation(),this.hide()},j={defaultDate:new Date,bigBanner:!0,format:"dd/mm/yyyy",onSelect:null};k.prototype.init=function(){this.el.inputContainer=document.createElement("INPUT"),this.el.dateContainer=document.createElement("DIV"),this.el.dateContainer.textContainer=document.createElement("span"),this.el.dateContainer.appendChild(this.el.dateContainer.textContainer),this.el.dateContainer.calIcon=document.createElement("i"),this.el.dateContainer.calIcon.setAttribute("class","fa fa-calendar"),this.el.dateContainer.appendChild(this.el.dateContainer.calIcon),this.el.inputContainer.setAttribute("type","hidden"),this.el.inputContainer.setAttribute("class","wc-input"),this.el.dateContainer.setAttribute("class","wc-date-container"),this.el.dateContainer.addEventListener("click",this.toggle.bind(this),!0),this.el.calendarPopup=document.createElement("DIV"),this.el.calendarPopup.setAttribute("class","wc-date-popover"),this.el.appendChild(this.el.inputContainer),this.el.appendChild(this.el.dateContainer),this.el.appendChild(this.el.calendarPopup),this.el.calendarPopup.style.display="none",this.createHeaderView(),this.createDaysView(),this.attachEvents(),document.getElementById(this.options.container).appendChild(this.el),this.setDateVal()},k.prototype.show=function(){this.updateView(),this.el.calendarPopup.style.display="block",document.addEventListener("click",i.bind(this),!1)},k.prototype.hide=function(){this.el.calendarPopup.style.display="none",document.removeEventListener("click",i.bind(this),!1)},k.prototype.toggle=function(a){a.stopPropagation(),"none"==this.el.calendarPopup.style.display?this.show():this.hide()},k.prototype.today=function(){this.selectedDate=new Date,this.updateView()},k.prototype.setDateVal=function(){this.selectedDate=new Date(this.date),this.el.dateContainer.textContainer.textContent=moment(this.selectedDate).format("DD/MM/YYYY"),this.el.inputContainer.value=moment(this.selectedDate).format("DD/MM/YYYY")},k.prototype.setDate=function(){this.el.dateContainer.textContainer.textContent=moment(this.date).format("DD/MM/YYYY"),this.el.inputContainer.value=moment(this.date).format("DD/MM/YYYY")},k.prototype.updateView=function(){this.date=new Date(this.selectedDate),this.setDateVal(),this.updateHeader(),this.destroyDaysTable(),this.createDaysView()},k.prototype.createHeaderView=function(){var a=this,g=a.date.getFullYear(),h=a.date.getMonth();a.date.getDate(),new Date(g,h,1);a.el.bigBanner=null;var k=f[a.date.getMonth()];1==h&&(g%4==0&&g%100!=0||g%400==0)&&(k=29);var l=d[h];a.el.setAttribute("class","winkel-calendar"),a.options.bigBanner&&(this.el.calendarPopup.classList.add("banner-true"),a.el.bigBanner=document.createElement("div"),a.el.bigBanner.setAttribute("class","wc-banner"),a.el.bigBanner.dayRow=document.createElement("div"),a.el.bigBanner.dayRow.setAttribute("class","wc-day-row"),a.el.bigBanner.dayRow.textContent=c[a.date.getDay()],a.el.bigBanner.appendChild(a.el.bigBanner.dayRow),a.el.bigBanner.monthAndYear=document.createElement("div"),a.el.bigBanner.monthAndYear.setAttribute("class","wc-my-sec"),a.el.bigBanner.monthRow=document.createElement("div"),a.el.bigBanner.monthRow.setAttribute("class","wc-month-row"),a.el.bigBanner.monthHeaderName=document.createElement("div"),a.el.bigBanner.monthHeaderName.textContent=e[a.date.getMonth()],a.el.bigBanner.monthRow.appendChild(a.el.bigBanner.monthHeaderName),a.el.bigBanner.monthControls=document.createElement("div"),a.el.bigBanner.monthControls.setAttribute("class","wc-month-controls"),a.el.bigBanner.prevMonthIcon=document.createElement("i"),a.el.bigBanner.prevMonthIcon.setAttribute("class","fa fa-angle-left"),a.el.bigBanner.prevMonthIcon.addEventListener("click",a.prevMonth.bind(this),!1),a.el.bigBanner.monthControls.appendChild(a.el.bigBanner.prevMonthIcon),a.el.bigBanner.nextMonthIcon=document.createElement("i"),a.el.bigBanner.nextMonthIcon.setAttribute("class","fa fa-angle-right"),a.el.bigBanner.nextMonthIcon.addEventListener("click",a.nextMonth.bind(this),!1),a.el.bigBanner.monthControls.appendChild(a.el.bigBanner.nextMonthIcon),a.el.bigBanner.monthRow.appendChild(a.el.bigBanner.monthControls),a.el.bigBanner.dateRow=document.createElement("div"),a.el.bigBanner.dateRow.setAttribute("class","wc-date-row"),a.date.getDate()<10?a.el.bigBanner.dateRow.textContent="0"+a.date.getDate():a.el.bigBanner.dateRow.textContent=a.date.getDate(),a.el.bigBanner.yearRow=document.createElement("div"),a.el.bigBanner.yearRow.setAttribute("class","wc-year-row"),a.el.bigBanner.yearVal=document.createElement("div"),a.el.bigBanner.yearVal.textContent=a.date.getFullYear(),a.el.bigBanner.yearRow.appendChild(a.el.bigBanner.yearVal),a.el.bigBanner.yearControls=document.createElement("div"),a.el.bigBanner.yearControls.setAttribute("class","wc-year-controls"),a.el.bigBanner.prevYearIcon=document.createElement("i"),a.el.bigBanner.prevYearIcon.setAttribute("class","fa fa-angle-left"),a.el.bigBanner.prevYearIcon.addEventListener("click",a.prevYear.bind(this),!1),a.el.bigBanner.yearControls.appendChild(a.el.bigBanner.prevYearIcon),a.el.bigBanner.nextYearIcon=document.createElement("i"),a.el.bigBanner.nextYearIcon.setAttribute("class","fa fa-angle-right"),a.el.bigBanner.nextYearIcon.addEventListener("click",a.nextYear.bind(this),!1),a.el.bigBanner.yearControls.appendChild(a.el.bigBanner.nextYearIcon),a.el.bigBanner.yearRow.appendChild(a.el.bigBanner.yearControls),a.el.bigBanner.appendChild(a.el.bigBanner.dateRow),a.el.bigBanner.monthAndYear.appendChild(a.el.bigBanner.monthRow),a.el.bigBanner.monthAndYear.appendChild(a.el.bigBanner.yearRow),a.el.bigBanner.appendChild(a.el.bigBanner.monthAndYear),a.el.calendarPopup.appendChild(a.el.bigBanner),console.log(a)),a.el.headerDetails=document.createElement("div"),a.el.headerDetails.setAttribute("class","wc-details"),a.options.bigBanner||(a.el.headerDetails.prevMonth=document.createElement("i"),a.el.headerDetails.prevMonth.setAttribute("class","wc-prev fa fa-angle-left"),a.el.headerDetails.prevMonth.addEventListener("click",a.prevMonth.bind(this),!1),a.el.headerDetails.appendChild(a.el.headerDetails.prevMonth),a.el.headerDetails.headerDIV=document.createElement("div"),a.el.headerDetails.headerDIV.setAttribute("class","month-year"),a.el.headerDetails.headerDIV.textContent=l+" "+g,a.el.headerDetails.appendChild(a.el.headerDetails.headerDIV),a.el.headerDetails.nextMonth=document.createElement("i"),a.el.headerDetails.nextMonth.setAttribute("class","wc-next fa fa-angle-right"),a.el.headerDetails.nextMonth.addEventListener("click",a.nextMonth.bind(this),!1),a.el.headerDetails.appendChild(a.el.headerDetails.nextMonth),a.el.calendarPopup.appendChild(a.el.headerDetails));var m=document.createElement("table");m.setAttribute("class","calendar-header");for(var n=document.createElement("tr"),o=0;o<=6;o++){var p=document.createElement("td");p.setAttribute("class","calendar-header-day"),p.textContent=b[o],n.appendChild(p)}m.appendChild(n),a.el.calendarPopup.appendChild(m)},k.prototype.getMonthLength=function(a,b){var c=f[a];return 1==a&&(b%4==0&&b%100!=0||b%400==0)&&(c=29),c},k.prototype.createDaysView=function(){var a=this,b=a.date.getFullYear(),c=a.date.getMonth(),d=a.date.getDate(),e=new Date,f=new Date(b,c,1),g=f.getDay(),h=this.getMonthLength(c,b),i=document.createElement("table");i.setAttribute("class","calendar-days");for(var j=1,k=null,l=0;l<9;l++){k=document.createElement("tr");for(var m=0;m<=6;m++){var n=document.createElement("td"),o=document.createElement("span");n.setAttribute("class","calendar-day"),j<=h&&(l>0||m>=g)&&(o.textContent=j,n.appendChild(o),j==parseInt(d)&&n.classList.add("selected-day"),j==parseInt(e.getDate())&&a.date.getMonth()==e.getMonth()&&a.date.getFullYear()==e.getFullYear()&&n.classList.add("today"),n.isDate=!0,j++),k.appendChild(n)}if(j>h)break;i.appendChild(k)}i.appendChild(k),a.el.calendarPopup.appendChild(i)},k.prototype.getHTML=function(){return this.html},k.prototype.update=function(){this.name="solomon",this.renderView()},k.prototype.attachEvents=function(){var a=this,b=a.el;b.addEventListener("click",a.onCalendarClick.bind(this),!1)},k.prototype.onCalendarClick=function(){var a=this,b=a.el;if(event.target.parentElement.hasOwnProperty("isDate")&&""!=event.target.innerHTML){var c=event.target.innerHTML;a.date.setDate(parseInt(c)),b.getElementsByClassName("selected-day")[0].classList.remove("selected-day"),event.target.classList.add("selected-day"),a.updateHeader(),this.setDateVal(),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.date),this.hide()}},k.prototype.updateHeader=function(){this.options.bigBanner?(console.log(this.date),this.el.bigBanner.dayRow.textContent=c[this.date.getDay()],this.el.bigBanner.monthHeaderName.textContent=e[this.date.getMonth()],this.el.bigBanner.dateRow.textContent=this.date.getDate()<10?"0"+this.date.getDate():this.date.getDate(),this.el.bigBanner.yearVal.textContent=this.date.getFullYear()):(console.log(),this.el.headerDetails.headerDIV.textContent=d[this.date.getMonth()]+" "+this.date.getFullYear())},k.prototype.prevMonth=function(){var a=this;if(0==a.date.getMonth())a.date.setMonth(11),a.date.setFullYear(a.date.getFullYear()-1);else{var b=a.getMonthLength(a.date.getMonth()-1,a.date.getFullYear()),c=a.date.getDate();c>b&&a.date.setDate(b),a.date.setMonth(a.date.getMonth()-1)}console.log(this.date),a.updateHeader(),a.destroyDaysTable(),a.createDaysView()},k.prototype.nextMonth=function(){var a=this;if(11==a.date.getMonth())a.date.setMonth(0),a.date.setFullYear(a.date.getFullYear()+1);else{var b=a.getMonthLength(a.date.getMonth()+1,a.date.getFullYear()),c=a.date.getDate();c>b&&a.date.setDate(b),a.date.setMonth(a.date.getMonth()+1)}console.log(this.date),a.updateHeader(),a.destroyDaysTable(),a.createDaysView()},k.prototype.prevYear=function(){this.date.setFullYear(this.date.getFullYear()-1),this.updateHeader(),this.destroyDaysTable(),this.createDaysView()},k.prototype.nextYear=function(){this.date.setFullYear(this.date.getFullYear()+1),this.updateHeader(),this.destroyDaysTable(),this.createDaysView()},k.prototype.destroyDaysTable=function(){this.el.calendarPopup.removeChild(this.el.calendarPopup.children[2])},a.WinkelCalendar=k||{}}(window);